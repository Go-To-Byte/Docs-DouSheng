(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{413:function(s,e,t){"use strict";t.r(e);var a=t(2),l=Object(a.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"拿到1个项目后-一般该如何运行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#拿到1个项目后-一般该如何运行"}},[s._v("#")]),s._v(" 拿到1个项目后，一般该如何运行？")]),s._v(" "),e("p",[s._v("先回答标题，当然，这里所说的是一般情况~")]),s._v(" "),e("ol",[e("li",[s._v("提供配置文件")]),s._v(" "),e("li",[s._v("安装项目所需环境以及创建数据库模型")]),s._v(" "),e("li",[s._v("运行项目")])]),s._v(" "),e("p",[s._v("那我们来看看，该如何启动"),e("code",[s._v("Dousheng")]),s._v("，这里面用到的一些工具，在这里不详细展开，请查看后面的章节，这里我们仅仅使用~")]),s._v(" "),e("h2",{attrs:{id:"一、利用工作区模式方便本地开发🥅"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、利用工作区模式方便本地开发🥅"}},[s._v("#")]),s._v(" 一、利用工作区模式方便本地开发🥅")]),s._v(" "),e("ul",[e("li",[s._v("拉取项目")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拉取项目")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone git@github.com:Go-To-Byte/DouSheng.git\n\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" DouSheng\n")])])]),e("ul",[e("li",[s._v("下载服务所需依赖")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以下载ApiRooter的依赖为例")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" api_rooter/\n\ngo mod tidy\n")])])]),e("ul",[e("li",[s._v("初始化"),e("code",[s._v("go.work")]),s._v("文件")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 初始化 工作区")]),s._v("\ngo work init dou_kit/ user_center/ video_service/\n")])])]),e("p",[s._v("执行过后，你的"),e("code",[s._v("go.work")]),s._v("文件内容如下：")]),s._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("go 1.19\n\nuse (\n   user_center\n   dou_kit\n   video_service\n)\n")])])]),e("p",[s._v("当你初始化工作区之后，本身是三个独立的服务，在本地开发调试时，就可以直接当作是一个项目了（文件路由引用）")]),s._v(" "),e("p",[s._v("注：这里所说的是"),e("strong",[s._v("当作")]),s._v("，实际上还是独立的服务。此文件不要推送至Git仓库")]),s._v(" "),e("h2",{attrs:{id:"二、添加服务的配置文件📄"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、添加服务的配置文件📄"}},[s._v("#")]),s._v(" 二、添加服务的配置文件📄")]),s._v(" "),e("p",[s._v("当新打开一个项目时，当然需要查看此项目是如何为程序提供配置的呐，应该很少有人把配置硬编码到代码中吧！！！")]),s._v(" "),e("p",[s._v("因为要保证相对的安全，敏感资源不被泄露，所以真正的配置文件是不会被推送至代码仓库的。")]),s._v(" "),e("p",[s._v("但是我们提供了配置文件的模板。按照模板，填写你的配置即可~")]),s._v(" "),e("p",[s._v("又因为几个服务是独立的，所以按理来说，每个服务都会有自己的配置文件，那我们先配置，让程序跑起来再说！")]),s._v(" "),e("ul",[e("li",[s._v("添加Api-Rooter的配置文件(根据模板填写你自己的配置)")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" api_rooter/etc/\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" config.toml.template config.toml\n")])])]),e("ul",[e("li",[s._v("添加视频服务配置文件(根据模板填写你自己的配置)")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" video_service/etc/\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" config.toml.template config.toml\n")])])]),e("ul",[e("li",[s._v("添加用户中心配置文件(根据模板填写你自己的配置)")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" user_center/etc/\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" config.toml.template config.toml\n")])])]),e("ul",[e("li",[s._v("依次类推，待会需要启动什么服务，就对什么服务进行配置....")])]),s._v(" "),e("p",[s._v("至此，你已经为你的服务提供了配置文件，来看看具体如何启动吧！")]),s._v(" "),e("h2",{attrs:{id:"三、根据配置文件-安装所需环境、创建数据库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、根据配置文件-安装所需环境、创建数据库"}},[s._v("#")]),s._v(" 三、根据配置文件，安装所需环境、创建数据库")]),s._v(" "),e("p",[s._v("在启动项目前，我们需要有这些环境。(在你为对应服务提供配置文件的时候，应该已经注意到了)")]),s._v(" "),e("ol",[e("li",[s._v("mysql环境\t\t\t [用于数据存储]")]),s._v(" "),e("li",[s._v("mongodb环境           [用于token鉴权]")]),s._v(" "),e("li",[s._v("consul环境            [微服务的注册中心]")])]),s._v(" "),e("p",[s._v("这里就不搬运大自然的产物了，可自行Google。但为了方便，推荐使用 docker")]),s._v(" "),e("p",[s._v('当然，肯定得先建立Mysql数据库所需要的表结构呐，这里不保姆式的教你创建数据库、创建表了。因为"咱们"都是：高级程序员~')]),s._v(" "),e("p",[s._v("创建对应的数据库，并且执行去执行sql脚本。")]),s._v(" "),e("p",[s._v("如果你觉得麻烦：可以把表创建在一个数据库中，总的脚本文件在项目中的："),e("code",[s._v("dou_kit/docs/sql/tables.sql")]),s._v(" 文件中。所有服务Mysql的配置就可以一致了")]),s._v(" "),e("p",[s._v("否则，你就需要切换到每一个服务，这里以"),e("code",[s._v("user_center")]),s._v("为例")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" user_center/\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 初始化操作")]),s._v("\ngo run main.go init\n")])])]),e("p",[s._v("当你运行了上面的命令，就会去读取"),e("code",[s._v("docs/sql/tables.sql")]),s._v("目录下的sql脚本。")]),s._v(" "),e("p",[s._v("也是一样的，你的mysql配置是什么，就会在你配置的数据库中执行脚本，若想将服务的数据库分开，那就可以使用多个数据库的配置。")]),s._v(" "),e("h2",{attrs:{id:"四、利用makefile工程化管理项目🤝"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四、利用makefile工程化管理项目🤝"}},[s._v("#")]),s._v(" 四、利用Makefile工程化管理项目🤝")]),s._v(" "),e("p",[s._v("如果"),e("strong",[s._v("安装好环境")]),s._v("，并且添加了"),e("strong",[s._v("配置文件")]),s._v("，那么你就可以使用如下命令启动服务：")]),s._v(" "),e("ul",[e("li",[s._v("传统方式启动")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以启动ApiRooter为例")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" api_rooter/\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动服务")]),s._v("\ngo run main.go start\n")])])]),e("p",[s._v("启动其他服务也是类似的做法，这里就不一一列举了。")]),s._v(" "),e("ul",[e("li",[s._v("工程化管理方式启动")])]),s._v(" "),e("p",[s._v("上面这种方式我们需要手动执行脚本，我们可以利用预定义在"),e("code",[s._v("Makefile")]),s._v("文件中的脚本，来对项目进行工程化管理。")]),s._v(" "),e("p",[s._v("当然呐，也有使用的前置条件："),e("a",{attrs:{href:"https://tehub.com/a/aCYp1uw0tG",target:"_blank",rel:"noopener noreferrer"}},[s._v("安装make指令(推荐第二种)"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("若安装完成后，可以利用如下指令，启动项目：")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入api_rooter项目中")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" api_rooter/\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 利用工程化的方式启动服务")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" run\n")])])]),e("p",[s._v("当然了，Makefile文件下，有很多指令，比如："),e("code",[s._v("dep、init、gen...")]),s._v("可以先自行研究，在后面的章节再介绍。")]),s._v(" "),e("p",[s._v("至此，相信你已经启动好项目了。若还想继续了解咱们"),e("code",[s._v("Go-To-Byte的Dousheng项目")]),s._v("，咱们接着往下看~")])])}),[],!1,null,null,null);e.default=l.exports}}]);